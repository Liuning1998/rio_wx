function canService(order) {
  if (order == null || order.state == null) {
    return false
  }
  var cannotStatus = ['new', 'canceled', 'handle_canceled', 'deleted']
  if (cannotStatus.indexOf(order.state) >= 0) {
    return false
  } else {
    return true
  }
}

function productType(order) {
  if (order == null || order.line_items == null || order.line_items.length <= 0) {
    return 0
  }
  var product = order.line_items[0].product
  if(product == null) { return 0 }
  if(product.tags.indexOf('虚拟卡券') >= 0) {
    return 1
  } else {
    return 2
  }
}

module.exports = {
  canService: canService,
  productType: productType
}